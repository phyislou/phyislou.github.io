「[State&生命周期](./04-State&生命周期.md)」<--「[章节列表](../React概述.md)」-->「[列表&Key](./07-列表&Key.md)」

***

# 事件处理

React元素的事件处理和DOM元素的很相似，但是在语法上有两点不同：
1. React事件的命名采用小驼峰式（camelCase），而不是纯小写。
2. 使用JSX语法时我们需要传入一个函数作为事件处理函数，而不是一个字符串。

比如，在传统的HTML中：
```html
<button onclick="activateLasers()">
  Activate Lasers
</button>
```

而在react中：
```html
<button onClick={activateLasers}>
  Activate Lasers
</button>
```

另外一个需要注意的点是，在React中不能通过返回false来阻止默认行为。必须显式地使用`preventDefault`。例如，传统的HTML中阻止链接默认打开一个新页面，我们一般这样写：
```html
<a href="#" onclick="console.log('The link was clicked.'); return false">
  Click me
</a>
```
而在React中，可能是这样的：
```jsx
function ActionLink() {
  function handleClick(e) {
    e.preventDefault();
    console.log('The link was clicked.');
  }

  return (
    <a href="#" onClick={handleClick}>
      Click me
    </a>
  );
}
```
在这里，e是一个合成事件。React根据[W3C规范](https://www.w3.org/TR/DOM-Level-3-Events/)来定义这些合成事件，所以我们并不需要担心跨浏览器的兼容性问题。  
React事件与原生事件不完全相同。如果想了解更多内容，请查看API参考一节中的[合成事件](../ApiReference/06-合成事件.md)（SyntheticEvent参考指南）。

使用React时，一般情况下并不需要使用`addEventListener`为已创建的DOM元素添加监听器（不然会难以掌控事件触发，比如事件的重复触发与缺失等），而是只需要在该元素初始渲染的时候添加监听器即可。

在使用ES6的class语法时定义一个组件的时候，通常的做法是将事件处理函数声明为class中的方法。例如，下面的Toggle组件会渲染一个让用户切换开关状态的按钮：
```jsx
class Toggle extends React.Component {
  constructor(props) {
    super(props);
    this.state = {isToggleOn: true};

    // 为了在回调中使用 `this`，这个绑定是必不可少的
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    this.setState(state => ({
      isToggleOn: !state.isToggleOn
    }));
  }

  render() {
    return (
      <button onClick={this.handleClick}>
        {this.state.isToggleOn ? 'ON' : 'OFF'}
      </button>
    );
  }
}

ReactDOM.render(
  <Toggle />,
  document.getElementById('root')
);
```

你必须谨慎对待 JSX 回调函数中的 this，在 JavaScript 中，class 的方法默认不会绑定 this。如果你忘记绑定 this.handleClick 并把它传入了 onClick，当你调用这个函数的时候 this 的值为 undefined。

这并不是 React 特有的行为；这其实与 JavaScript 函数工作原理有关。通常情况下，如果你没有在方法后面添加 ()，例如 onClick={this.handleClick}，你应该为这个方法绑定 this。

如果觉得使用 bind 很麻烦，这里有两种方式可以解决。如果你正在使用实验性的 public class fields 语法，你可以使用 class fields 正确的绑定回调函数：


***

「[State&生命周期](./04-State&生命周期.md)」<--「[章节列表](../React概述.md)」-->「[列表&Key](./07-列表&Key.md)」